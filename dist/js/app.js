(function(t){function e(e){for(var n,s,i=e[0],u=e[1],l=e[2],p=0,f=[];p<i.length;p++)s=i[p],r[s]&&f.push(r[s][0]),r[s]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);c&&c(e);while(f.length)f.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,i=1;i<a.length;i++){var u=a[i];0!==r[u]&&(n=!1)}n&&(o.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},r={app:0},o=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var c=u;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0e50":function(t,e,a){"use strict";var n=a("7779"),r=a.n(n);r.a},1195:function(t,e,a){"use strict";var n=a("af29"),r=a.n(n);r.a},"3d26":function(t,e,a){"use strict";var n=a("6a8c"),r=a.n(n);r.a},"56d7":function(t,e,a){"use strict";a.r(e);a("ac6a"),a("6b54"),a("cadf"),a("551c"),a("097d");var n=a("ca94");window.graphqlCharts=function(t){return function(e,n){if(!e||!n)throw new Error("Invalid authName or apiKey passed to graphqlCharts()");e=e.toString(),n=n.toString();var r=t(),o=r.provide(),s=a("f1ac");s.keys().forEach(function(t){var a=s(t).default;a&&"function"===typeof a&&a(e,n,o)})}}(n["a"])},"5d09":function(t,e,a){},"6a8c":function(t,e,a){},"6f91":function(t,e,a){},7779:function(t,e,a){},"877e":function(t,e,a){"use strict";var n=a("db83"),r=a.n(n);r.a},"8e24":function(t,e,a){},"8eb2":function(t,e,a){"use strict";var n=a("8e24"),r=a.n(n);r.a},"9acd":function(t,e,a){"use strict";var n=a("5d09"),r=a.n(n);r.a},"9eaa":function(t,e,a){"use strict";var n=a("ec6f"),r=a.n(n);r.a},ad1a:function(t,e,a){"use strict";var n=a("6f91"),r=a.n(n);r.a},af29:function(t,e,a){},bb4b:function(t,e,a){"use strict";var n=a("fc24"),r=a.n(n);r.a},ca94:function(t,e,a){"use strict";a.d(e,"a",function(){return v}),a.d(e,"b",function(){return b});var n=a("f9fa"),r=a("9395"),o=(a("cadf"),a("551c"),a("097d"),a("2b0e")),s=a("522d"),i=a("efe7"),u=a("fa4e"),l=a("844c"),c=a("71f3");o["default"].use(s["a"]);var p="apollo-token",f="http://localhost:8585/api",m=Object(l["a"])({uri:f}),d=Object(u["setContext"])(function(t,e){var a=e.headers,n=localStorage.getItem(p);return{headers:Object(r["a"])({},a,{authorization:n?"Bearer ".concat(n):""})}}),h={httpEndpoint:f,wsEndpoint:null,tokenName:p,persisting:!1,websocketsOnly:!1,ssr:!1,link:d.concat(m),cache:new c["a"]};function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object(i["createApolloClient"])(Object(r["a"])({},h,t)),a=e.apolloClient,n=new s["a"]({defaultClient:a,defaultOptions:{$query:{}},errorHandler:function(t){console.log("%cError","background: red; color: white; padding: 2px 4px; border-radius: 3px; font-weight: bold;",t.message)}});return n}function b(t,e){"undefined"!==typeof localStorage&&e&&localStorage.setItem(p,e),"object"===Object(n["a"])(t.wsClient)&&Object(i["restartWebsockets"])(t.wsClient)}},db68:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chart-overviewStats"},[a("div",{staticClass:"inlineResponsive"},[a("NumericTextEntry",{attrs:{title:"Number of Months to Look Back",initialValue:t.lookbackMonths,value:t.mutableLookbackMonths,min:"1"},on:{"update:value":function(e){t.mutableLookbackMonths=e}}})],1),a("div",{staticClass:"inlineResponsive"},[a("NumericTextEntry",{attrs:{title:"Number of Results to Show",initialValue:t.maxGraphResults,value:t.mutableMaxGraphResults,min:"1"},on:{"update:value":function(e){t.mutableMaxGraphResults=e}}})],1),a("transition",{attrs:{name:"fade"}},[t.loading?a("h2",[t._v("\n      Loading...\n    ")]):a("div",[a("NumberOfSales",{attrs:{value:t.stats.numberOfSales}}),a("TotalSales",{attrs:{value:t.stats.totalSalesDollars}}),a("MostPopularItem",{attrs:{value:t.stats.mostPopularItem}}),a("TotalCustomers",{attrs:{value:t.stats.totalCustomers}}),a("RepeatCustomers",{attrs:{value:t.stats.repeatCustomers}}),a("AvgDaysBetweenSales",{attrs:{value:t.stats.averageDaysBetweenSales}}),a("AvgTransactionValue",{attrs:{value:t.stats.averageTransactionValue}}),a("TopBuyers",{attrs:{data:t.stats.topBuyers,resized:t.chartResized}}),a("MostSoldProducts",{attrs:{data:t.stats.mostSoldProducts,resized:t.chartResized}})],1)])],1)},r=[],o=(a("96cf"),a("cb0c")),s=(a("7f7f"),a("f9fa")),i=a("ab48"),u=(a("456d"),a("ac6a"),a("c5f6"),a("9530")),l=a.n(u),c=a("7be8"),p=a.n(c),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"chart-num-textinput"},[t.title?a("p",{staticClass:"chart-num-textinput-title"},[t._v(t._s(t.title))]):t._e(),a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],attrs:{type:"number",min:t.min,max:t.max},domProps:{value:t.value},on:{change:function(e){t.onChange()},input:function(e){e.target.composing||(t.value=e.target.value)}}})])},m=[],d={name:"NumericTextEntry",props:{title:String,initialValue:{cast:Number},max:{cast:Number},min:{cast:Number}},data:function(){return{value:"number"===typeof this.initialValue&&null!==this.initialValue&&("number"===typeof this.min&&null!==this.min&&this.initialValue>=this.min||"number"!==typeof this.min||null===this.min)&&("number"===typeof this.max&&null!==this.max&&this.initialValue<=this.max||"number"!==typeof this.max||null===this.max)?this.initialValue:0}},methods:{onChange:function(){this.$emit("update:value",parseInt(this.value))}}},h=d,v=(a("1195"),a("2877")),b=Object(v["a"])(h,f,m,!1,null,"23fecd82",null);b.options.__file="NumericTextEntry.vue";var g=b.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("TextReport",{attrs:{title:"Average Number of Days Between Sales for Repeat Customers",message:t.value.toFixed(1)}})},S=[],x=(a("cadf"),a("551c"),a("097d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.titleFirst?a("div",{staticClass:"chart-text"},[a("p",{staticClass:"chart-text-title chart-text-first"},[t._v(t._s(t.title))]),a("p",{staticClass:"chart-text-message"},[t._v(t._s(t.message))])]):a("div",{staticClass:"chart-text"},[a("p",{staticClass:"chart-text-message chart-text-first"},[t._v(t._s(t.message))]),a("p",{staticClass:"chart-text-title"},[t._v(t._s(t.title))])])}),w=[],k=a("6365"),O={name:"TextReport",props:{title:String,message:{cast:String},titleFirst:{type:Boolean,default:!0}},components:{VueCastProps:k["a"]}},_=O,C=(a("9acd"),Object(v["a"])(_,x,w,!1,null,"7e8df920",null));C.options.__file="TextReport.vue";var R=C.exports,j={name:"AvgDaysBetweenSales",components:{TextReport:R},props:{value:Number}},T=j,P=Object(v["a"])(T,y,S,!1,null,null,null);P.options.__file="AvgDaysBetweenSales.vue";var z=P.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("TextReport",{attrs:{title:"Average Spend Per Order",message:t.value.toLocaleString("en-US",{style:"currency",currency:"USD"})}})},N=[],B={name:"AvgTransactionValue",components:{TextReport:R},props:{value:Number}},E=B,U=Object(v["a"])(E,M,N,!1,null,null,null);U.options.__file="AvgTransactionValue.vue";var D=U.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("TextReport",{attrs:{title:"Total Number of Customers",message:t.value}})},$=[],A={name:"TotalCustomers",components:{TextReport:R},props:{value:Number}},L=A,I=Object(v["a"])(L,V,$,!1,null,null,null);I.options.__file="TotalCustomers.vue";var q=I.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("TextReport",{attrs:{title:"Number of Repeat Customers",message:t.value}})},G=[],F={name:"RepeatCustomers",components:{TextReport:R},props:{value:Number}},K=F,W=Object(v["a"])(K,H,G,!1,null,null,null);W.options.__file="RepeatCustomers.vue";var J=W.exports,Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("TextReport",{attrs:{title:"Total Number of Sales",message:t.value}})},Y=[],X={name:"NumberOfSales",components:{TextReport:R},props:{value:Number}},Z=X,tt=Object(v["a"])(Z,Q,Y,!1,null,null,null);tt.options.__file="NumberOfSales.vue";var et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("TextReport",{attrs:{title:"Gross Sales",message:t.value.toLocaleString("en-US",{style:"currency",currency:"USD"})}})},nt=[],rt={name:"TotalSales",components:{TextReport:R},props:{value:Number}},ot=rt,st=Object(v["a"])(ot,at,nt,!1,null,null,null);st.options.__file="TotalSales.vue";var it=st.exports,ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("TextReport",{attrs:{title:"Most Popular Item",message:t.value}})},lt=[],ct={name:"MostPopularItem",components:{TextReport:R},props:{value:String}},pt=ct,ft=Object(v["a"])(pt,ut,lt,!1,null,null,null);ft.options.__file="MostPopularItem.vue";var mt=ft.exports,dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"topBuyers",style:t.totalHeight},[a("h3",{staticClass:"chart-title"},[t._v("Top Buyers")]),a("div",[a("HorizontalBarChart",{attrs:{data:t.data,formatter:t.formatter,getValue:t.getValue,margin:t.margin,resized:t.passResize,rowCount:t.rows},on:{"update:rowCount":function(e){t.rows=e}}})],1)])},ht=[],vt=(a("6b54"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.data.length>0?a("div",{staticClass:"chartContainer"},[a("svg",{attrs:{width:t.width,height:t.height,preserveAspectRatio:"none"}},[a("g",{style:{transform:"translate("+t.margin.left+"px, "+t.margin.top+"px)"}},[a("g",{directives:[{name:"axis",rawName:"v-axis:y",value:t.scaled,expression:"scaled",arg:"y"}],staticClass:"y axis"}),t._l(t.uniqueData,function(e,n){return a("g",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"function"===typeof t.formatter.tooltip?t.formatter.tooltip(e):t.defaultFormatter.tooltip(e),expression:"typeof(formatter.tooltip) === 'function' ?\n                                formatter.tooltip(d)\n                                : defaultFormatter.tooltip(d)"}],key:n},[a("rect",{staticClass:"bar",attrs:{y:t.scaled.y?t.scaled.y("function"===typeof t.formatter.label?t.formatter.label(e.name):t.defaultFormatter.label(e.name)):0,height:t.scaled.y?t.scaled.y.bandwidth():0,x:"0",width:Math.max(0,t.scaled.x(t.getValue(e)))}}),a("text",{staticClass:"label",attrs:{y:t.scaled.y?t.scaled.y("function"===typeof t.formatter.label?t.formatter.label(e.name):t.defaultFormatter.label(e.name))+t.scaled.y.bandwidth()/2+4:0,x:t.scaled.x?t.scaled.x(t.getValue(e))+3:0}},[t._v("\n                    "+t._s("function"===typeof t.formatter.value?t.formatter.value(e.value):t.defaultFormatter.value(e.value))+"\n                ")])])})],2)])]):a("div",{staticClass:"noData"},[a("h2",[t._v("No Data")])])}),bt=[],gt=a("5698"),yt=a("e37d");yt["a"].options.disposeTimeout=100,yt["a"].options.trigger="hover",yt["a"].options.defaultTemplate='<div class="vue-tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>';var St={value:function(t){return t},tooltip:function(t){return t.value.toString()},label:function(t){return t}},xt={data:{type:Array,default:function(){return[{name:"Aa",value:95}]}},formatter:{type:Object,default:function(){return St}},getValue:{type:Function,default:function(t){return parseInt(t.value)}},margin:{type:Object,default:function(){return{left:60,right:25,top:15,bottom:15}}},resized:{type:Boolean,default:!1}},wt={name:"HorizontalBarChart",props:xt,data:function(){return{width:0,height:100,defaultFormatter:St}},computed:{padded:function(){var t=this.width-this.margin.left-this.margin.right,e=this.height-this.margin.top-this.margin.bottom;return{width:t,height:e}},uniqueData:function(){if("object"!==Object(s["a"])(this.data)||this.data.length<1)return[];var t={},e=[];return this.data.forEach(function(a,n){if("number"===typeof t[a.name])return a.name+=" "+(t[a.name]++).toString(),void e.push(a);t[a.name]=1,e.push(a)}),e},scaled:function(t){return function(){return{x:t.scaleLinear().range([0,this.padded.width]).domain([0,t.max(this.uniqueData,function(t){return function(e){return t.getValue(e)}}(this))]),y:t.scaleBand().range([0,this.padded.height]).padding(.1).domain(this.uniqueData.map(function(t){return function(e){return"function"===typeof t.formatter.label?t.formatter.label(e.name):St.label(e.name)}}(this)))}}}(gt)},mounted:function(){var t=this;setTimeout(function(){window.addEventListener("resize",t.onResize),t.onResize(),t.initialize()},400)},beforeDestroy:function(){window.removeEventListener("resize",this.onResize)},watch:{width:function(){this.initialize()},height:function(){this.initialize()},resized:function(){this.onResize()},data:function(){this.initialize()}},methods:{initialize:function(){gt["axisLeft"]().scale(this.scaled.y).tickSize(0),gt["axisBottom"]().scale(this.scaled.x),this.$emit("update:rowCount",this.uniqueData.length)},onResize:function(){this.width=this.$el.offsetWidth,this.height=this.$el.offsetHeight}},directives:{axis:function(t,e){var a=e.arg,n={x:"axisBottom",y:"axisLeft"}[a],r=e.value[a];gt["select"](t).call(gt[n](r))},tooltip:yt["a"]}},kt=wt,Ot=(a("bb4b"),Object(v["a"])(kt,vt,bt,!1,null,"531c2d7b",null));Ot.options.__file="HorizontalBarChart.vue";var _t=Ot.exports,Ct=(a("4f3b"),{value:function(t){return"object"!==Object(s["a"])(t)||null===t||"number"!==typeof t.sales||null===t.sales?"":t.sales.toLocaleString("en-US",{style:"currency",currency:"USD"})},tooltip:function(t){if("object"!==Object(s["a"])(t)||null===t)return"Unknown";var e="string"===typeof t.name?t.name:"Unknown Customer",a="Unknown Amount",n="?",r="?",o="?",i="?",u="?";return"object"===Object(s["a"])(t.value)&&null!==t.value&&(a="number"===typeof t.value.sales?Ct.value(t.value):a,n="number"===typeof t.value.orderCount?t.value.orderCount.toString():n,r="number"===typeof t.value.rank?t.value.rank.toString():r,o="number"===typeof t.value.lookbackMonths?t.value.lookbackMonths.toString():o,i="number"===typeof t.value.avgDaysBetweenSales?t.value.avgDaysBetweenSales.toFixed(1).toString():i,u="number"===typeof t.value.avgTransactionValue?t.value.avgTransactionValue.toLocaleString("en-US",{style:"currency",currency:"USD"}).toString():u),'<span class="chart-center">\n      <h3>'.concat(e,"</h3>\n      <p>Your #").concat(r," Customer</p>\n    </span>\n    <p><b>").concat(a,"</b> in Sales Across ").concat(n," Orders</p>\n    <p>&nbsp;</p>\n    <p>Average Spend Per Order: <b>").concat(u,"</b></p>\n    ").concat("?"!=i&&parseFloat(i)>0?"<p>Average # of Days Between Sales: <b>".concat(i,"</b></p>"):"",'\n    <p>&nbsp;</p>\n    <p class="chart-center">(Over The Past ').concat(o," Months)</p>")}}),Rt=function(t){return"object"===Object(s["a"])(t.value)&&"number"===typeof t.value.sales?t.value.sales:0},jt={name:"TopBuyers",components:{HorizontalBarChart:_t},computed:{margin:function(){return{left:130,right:80,top:15,bottom:15}},totalHeight:function(){return{height:"calc("+Math.round(1.3*this.rows).toString()+"em + 2em + "+(this.margin.top+this.margin.bottom).toString()+"px)"}}},data:function(){return{rows:20,formatter:Ct,getValue:Rt,passResize:this.resized}},watch:{rows:function(){this.$forceUpdate(),this.passResize=!this.passResize}},props:{data:{type:Array,default:function(){return[]}},resized:{type:Boolean,default:!1}}},Tt=jt,Pt=(a("ad1a"),a("877e"),Object(v["a"])(Tt,dt,ht,!1,null,"43e604c6",null));Pt.options.__file="TopBuyers.vue";var zt=Pt.exports,Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mostSoldProducts",style:t.totalHeight},[a("h3",{staticClass:"chart-title"},[t._v("Most Sold Products")]),a("div",[a("HorizontalBarChart",{attrs:{data:t.data,margin:t.margin,resized:t.passResize,getValue:t.getValue,formatter:t.formatter,rowCount:t.rows},on:{"update:rowCount":function(e){t.rows=e}}})],1)])},Nt=[],Bt={value:function(t){return"object"===Object(s["a"])(t)&&"number"===typeof t.qtySold?t.qtySold:0},tooltip:function(t){if("object"!==Object(s["a"])(t)||null===t)return"Unknown";var e="string"===typeof t.name?t.name:"Unknown Product",a="Unknown Amount",n="Unknown",r="?",o="?",i="Unknown",u="Unknown",l="?";return"undefined"!==typeof t.value&&null!==t.value&&(n="string"===typeof t.value.sku?t.value.sku:n,a="number"===typeof t.value.qtySold?t.value.qtySold.toString():a,r="number"===typeof t.value.orderCount?t.value.orderCount.toString():r,o="number"===typeof t.value.rank?t.value.rank.toString():o,i="number"===typeof t.value.repPrice?t.value.repPrice.toLocaleString("en-US",{style:"currency",currency:"USD"}):i,u="number"===typeof t.value.retailPrice?t.value.retailPrice.toLocaleString("en-US",{style:"currency",currency:"USD"}):u,l="number"===typeof t.value.lookbackMonths?t.value.lookbackMonths.toString():l),'<span class="chart-center">\n      <h3>'.concat(e,"</h3>\n      <p>SKU: ").concat(n,"</p>\n      <p>&nbsp;</p>\n      <p>Your #").concat(o," Product by Volume</p>\n    </span>\n    <p><b>").concat(a,"</b> Units Sold Across ").concat(r," Orders</p>\n    <p>&nbsp;</p>\n    <p>Wholesale Price: ").concat(i,"</p>\n    <p>Retail Price: ").concat(u,'</p>\n    <p>&nbsp;</p>\n    <p class="chart-center">(Over The Past ').concat(l," Months)</p>")}},Et=function(t){return"object"===Object(s["a"])(t.value)&&"number"===typeof t.value.qtySold?t.value.qtySold:0},Ut={name:"MostSoldProducts",components:{HorizontalBarChart:_t},computed:{margin:function(){return{left:260,right:50,top:15,bottom:15}},totalHeight:function(){return{height:"calc("+Math.round(1.3*this.rows).toString()+"em + 2em + "+(this.margin.top+this.margin.bottom).toString()+"px)"}}},watch:{rows:function(){this.$forceUpdate(),this.passResize=!this.passResize},resized:function(){this.passResize=!this.passResize}},data:function(){return{rows:20,passResize:this.resized,formatter:Bt,getValue:Et}},props:{data:{type:Array,default:function(){return[]}},resized:{type:Boolean,default:!1}}},Dt=Ut,Vt=(a("9eaa"),a("3d26"),Object(v["a"])(Dt,Mt,Nt,!1,null,"77900ab4",null));Vt.options.__file="MostSoldProducts.vue";var $t=Vt.exports,At=a("ca94");function Lt(){var t=Object(i["a"])(["\n                mutation ($authName: String!, $apiKey: String!) {\n                    login(authName: $authName, apiKey: $apiKey)\n                }\n            "]);return Lt=function(){return t},t}var It=!1;function qt(t,e,a){return Ht.apply(this,arguments)}function Ht(){return Ht=Object(o["a"])(regeneratorRuntime.mark(function t(e,a,n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,r){e.mutate({mutation:l()(Lt()),variables:{apiKey:n,authName:a},update:function(t,e){return function(a,n){var r=n.data.login;r&&(Object(At["b"])(t.getClient(),r),e(!0))}}(e,t)}).catch(function(t){r(t)})}));case 1:case"end":return t.stop()}},t,this)})),Ht.apply(this,arguments)}function Gt(t,e,a,n,r){return Ft.apply(this,arguments)}function Ft(){return Ft=Object(o["a"])(regeneratorRuntime.mark(function t(e,a,n,r,o){var s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!It){t.next=2;break}return t.abrupt("return",Promise.resolve());case 2:if(It=!0,!e.networkError){t.next=5;break}return t.abrupt("return",Promise.resolve());case 5:if(!e.graphQLErrors){t.next=19;break}s="BreakException",i=!1,t.prev=8,e.graphQLErrors.map(function(t){var e=t.message;if("Not Logged In"==e)throw i=!0,s}),t.next=16;break;case 12:if(t.prev=12,t.t0=t["catch"](8),t.t0===s){t.next=16;break}throw t.t0;case 16:if(!i){t.next=19;break}return n.getClient().resetStore(),t.abrupt("return",qt(n,r,o).then(function(){try{It=!1,a.refetch()}catch(t){console.log("%cError","background: red; color: white; padding: 2px 4px; border-radius: 3px; font-weight: bold;",t.message)}return!0}));case 19:case"end":return t.stop()}},t,this,[[8,12]])})),Ft.apply(this,arguments)}var Kt=a("5118");function Wt(){var t=Object(i["a"])(["\n        query stats($userId:Int!, $lookbackMonths: Int!, $maxGraphResults: Int!) {\n          getUser(id: $userId)\n          {\n            sellsTo(lookbackMonths: $lookbackMonths)\n            {\n              numberOfSales\n              averageDaysBetweenSales\n              averageTransactionValue\n              totalSales\n              buyer {\n                fullName\n              }\n            }\n            soldProducts(lookbackMonths: $lookbackMonths, parentProducts: true, first: $maxGraphResults)\n            {\n              quantity\n              numberOfOrders\n              product {\n                name\n                sku\n                repPrice\n                retailPrice\n              }\n            }\n          }\n        }\n      "]);return Wt=function(){return t},t}var Jt=function(){return{averageDaysBetweenSales:0,averageTransactionValue:0,totalCustomers:0,repeatCustomers:0,numberOfSales:0,totalSalesDollars:0,mostPopularItem:"",topBuyers:[],mostSoldProducts:[]}},Qt={name:"OverviewStats",components:{NumericTextEntry:g,AvgDaysBetweenSales:z,AvgTransactionValue:D,TotalCustomers:q,MostPopularItem:mt,RepeatCustomers:J,NumberOfSales:et,TotalSales:it,TopBuyers:zt,MostSoldProducts:$t,VueGridLayout:p.a},props:{lookbackMonths:{type:Number,default:12},maxGraphResults:{type:Number,default:20},apiKey:String,authName:String,rowHeight:{type:Number,default:20},layout:{type:Array,default:function(){var t=localStorage.getItem("overviewStatsLayout");return null!==t?(t=JSON.parse(t),Object.keys(t).forEach(function(e){var a=t[e];"TopBuyers"!=a.i&&"MostSoldProducts"!=a.i||(t[e].minW=6,t[e].minH=15,t[e].isResizable=!0)}),t):[{x:0,y:0,w:3,h:2,i:"NumberOfSales"},{x:0,y:2,w:3,h:2,i:"TotalSales"},{x:0,y:4,w:3,h:2,i:"MostPopularItem"},{x:0,y:6,w:3,h:2,i:"TotalCustomers"},{x:0,y:8,w:3,h:2,i:"RepeatCustomers"},{x:0,y:10,w:3,h:2,i:"AvgDaysBetweenSales"},{x:0,y:12,w:3,h:2,i:"AvgTransactionValue"},{x:0,y:14,w:6,h:20,minW:6,minH:15,isResizable:!0,i:"TopBuyers"},{x:0,y:34,w:6,h:20,minW:6,minH:15,isResizable:!0,i:"MostSoldProducts"}]}}},methods:{gridResized:function(){var t=this;Object(Kt["setInterval"])(function(){t.resizeCharts()},350)},resizeCharts:function(t){this.chartResized=!this.chartResized;var e=[];Object.keys(t).forEach(function(a){e.push({x:t[a].x,y:t[a].y,w:t[a].w,h:t[a].h,i:t[a].i})}),localStorage.setItem("overviewStatsLayout",JSON.stringify(e))}},watch:{mutableLookbackMonths:function(){this.loading=!0},mutableMaxGraphResults:function(){this.loading=!0}},data:function(){return{stats:Jt(),chartResized:!1,loading:!0,mutableLookbackMonths:this.lookbackMonths,mutableMaxGraphResults:this.maxGraphResults}},apollo:{stats:{fetchPolicy:"no-cache",query:l()(Wt()),variables:function(){return{userId:parseInt(this.authName),lookbackMonths:this.mutableLookbackMonths,maxGraphResults:this.mutableMaxGraphResults}},update:function(t){if(this.loading=!0,"object"!==Object(s["a"])(t.getUser)||"object"!==Object(s["a"])(t.getUser.sellsTo)||!Array.isArray(t.getUser.soldProducts))return Jt();var e=1,a="N/A",n=[];t.getUser.soldProducts.length>0&&"string"===typeof t.getUser.soldProducts[0].product.name&&(a=t.getUser.soldProducts[0].product.name,Object.keys(t.getUser.soldProducts).forEach(function(a){return function(r){var o=t.getUser.soldProducts[r];n.push({name:o.product.name,value:{qtySold:o.quantity,orderCount:o.numberOfOrders,sku:o.product.sku,rank:e,repPrice:o.product.repPrice,retailPrice:o.product.retailPrice,lookbackMonths:a.mutableLookbackMonths}}),e++}}(this)));var r=t.getUser.sellsTo,o=0,i=0,u=0,l=0,c=0,p=0,f=[];e=1;var m=this.mutableMaxGraphResults;return Object.keys(r).forEach(function(t){return function(a){var n=r[a];u<m&&(f.push({name:n.buyer.fullName,value:{sales:n.totalSales,lookbackMonths:t.mutableLookbackMonths,orderCount:n.numberOfSales,rank:e,avgTransactionValue:n.averageTransactionValue,avgDaysBetweenSales:n.averageDaysBetweenSales}}),e++),u++,n.numberOfSales>1&&(l++,o+=n.averageDaysBetweenSales),c+=n.numberOfSales,p+=n.totalSales}}(this)),0!=l?o/=l:o=0,c>0&&(i=p/c),this.loading=!1,{averageDaysBetweenSales:o,averageTransactionValue:i,totalCustomers:u,repeatCustomers:l,numberOfSales:c,totalSalesDollars:p,mostPopularItem:a,topBuyers:f,mostSoldProducts:n}},error:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Gt(e,this.$apollo.queries.stats,this.$apollo,this.authName,this.apiKey);case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}}},Yt=Qt,Xt=(a("0e50"),a("8eb2"),Object(v["a"])(Yt,n,r,!1,null,"2595ed22",null));Xt.options.__file="OverviewStats.vue";var Zt=Xt.exports,te=a("2b0e"),ee=a("660e");function ae(t,e,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"chart-overviewStats";document.getElementById(n)&&(te["default"].use(ee["a"]),new te["default"]({el:"#"+n,provide:a,components:{OverviewStats:Zt},render:function(a){return a(Zt,{props:{authName:t,apiKey:e}})}}))}a.d(e,"default",function(){return ae})},db83:function(t,e,a){},ec6f:function(t,e,a){},f1ac:function(t,e,a){var n={"./OverviewStats.js":"db68"};function r(t){var e=o(t);return a(e)}function o(t){var e=n[t];if(!(e+1)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return e}r.keys=function(){return Object.keys(n)},r.resolve=o,t.exports=r,r.id="f1ac"},fc24:function(t,e,a){}});
//# sourceMappingURL=app.js.map